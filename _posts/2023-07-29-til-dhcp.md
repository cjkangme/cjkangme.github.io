

        ---
        title: [TIL] DHCP
        date: 2023-07-29 14:17:15.016 +0000
        categories: [TIL]
        tags: ['cs', 'til', '네트워크']
        description: DHCP가 뭘까? 왜 쓸까?
        
        
        ---

        # DHCP

### DHCP 란

- Dynamic Host Configuration Protocol
- DHCP는 장치가 인터넷에 접속할 때마다 자동으로 IP 주소를 할당해주는 네트워크 프로토콜이다.
- 일반적으로 라우터 또는 게이트웨이 장비에 DHCP 할당 기능이 탑재되어 가정용 네트워크에 IP 주소를 부여한다.
- 이렇게 할당 받은 IP 주소는 일정기간이 지나면 반환해야하는 임대(Lease)개념이다.
  - 임대 기간을 자유롭게 설정할 수 있다.
  - 예를 들어 사람이 많이 오가는 카페의 경우 임대 기간을 길게하면 IP 주소가 잘 반환되지 않아 IP 주소가 금방 꽉 차게 될 것이다. 이럴 경우 임대 기간을 1~2시간 정도로 짧게 주면 해결이 가능하다.

### DHCP의 장점
- 네트워크를 사용하는 동안에만 IP를 빌려주고, 사용하지 않으면 환수하는 것이 가능하기 때문에 한정된 IP 주소를 효율적으로 사용할 수 있다.
- 현재 할당 가능한 주소만 장치에 할당되기 때문에, IP 주소 충돌을 예방할 수 있다.

### DHCP 할당 과정
1. IP 주소가 할당되지 않은 클라이언트는 Discover 패킷을 브로드캐스트한다.

2. DHCP서버가 Discover 패킷을 수신하면 Offer 패킷을 브로드캐스트한다. Discover를 보낸 클라이언트가 Offer 패킷을 받으면 해당 네트워크에 DHCP 서버가 있다는 것을 인지하게 된다.
3. 네트워크에 DHCP 서버가 있다는 것을 알고 있으므로 이번엔 IP 주소를 요청하는 Request 패킷을 브로드캐스트한다. 브로드캐스트를 하는 이유는 네트워크에 DHCP 서버가 2개 이상 있을 수 있기 때문이다.
4. DHCP 서버가 Request 패킷을 수신하면 자신의 IP 임대 풀에서 할당 가능한 주소를 브로드캐스트한다. 주소가 클라이언트에 도착하면 해당 IP 주소가 할당된 것이다.

        